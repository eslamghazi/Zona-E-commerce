import{a as E,b as G,c as H}from"./chunk-OSBWULYZ.js";import{a as I}from"./chunk-JWTEGQIE.js";import{a as V,d as q}from"./chunk-FQSVEZTO.js";import{b as z}from"./chunk-XDCM73YA.js";import{a as J}from"./chunk-5S2CN2CA.js";import{h as U,ia as N,j as L,k as $}from"./chunk-UVJ4NX35.js";import{$a as D,Cb as T,Fb as v,Gb as y,Hb as e,Ib as t,Jb as R,Nb as A,Pc as j,Qb as M,Sb as C,Sc as h,Tc as b,Vb as w,Wb as P,ac as i,bc as m,cb as d,cc as p,ic as g,ka as x,mc as F,nc as l,oa as f,oc as s,pc as S,vb as B,xa as O,xb as k,ya as _}from"./chunk-GDNDWUAB.js";var X=(a,n)=>n.productId;function Y(a,n){if(a&1&&(e(0,"tr")(1,"td",23)(2,"div",24),R(3,"img",25),e(4,"span"),i(5),t()()(),e(6,"td",26),i(7),t(),e(8,"td",27),i(9),l(10,"currency"),t()()),a&2){let r=n.$implicit;d(3),w("src",r.pictureUrl,D),w("alt",r.productName),d(2),m(r.productName),d(2),p("x",r.quantity,""),d(2),m(s(10,5,r.price))}}function Z(a,n){if(a&1){let r=A();e(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),i(4),t(),e(5,"button",4),M("click",function(){O(r);let o=C();return _(o.onReturnClick())}),i(6),t()(),e(7,"div",5)(8,"div",6)(9,"h4",7),i(10,"Billing and delivery information"),t(),e(11,"dl")(12,"dt",8),i(13,"Shipping address"),t(),e(14,"dd",9),i(15),l(16,"address"),t()(),e(17,"dl")(18,"dt",8),i(19,"Payment info"),t(),e(20,"dd",9),i(21),l(22,"paymentCard"),t()()(),e(23,"div",6)(24,"h4",7),i(25,"Order details"),t(),e(26,"dl")(27,"dt",8),i(28,"Email address"),t(),e(29,"dd",9),i(30),t()(),e(31,"dl")(32,"dt",8),i(33,"Order status"),t(),e(34,"dd",9),i(35),t()(),e(36,"dl")(37,"dt",8),i(38,"Order date"),t(),e(39,"dd",9),i(40),l(41,"date"),t()()()(),e(42,"div",10)(43,"div",11)(44,"table",12)(45,"tbody",13),v(46,Y,11,7,"tr",null,X),t()()()(),e(48,"div",14)(49,"p",15),i(50,"Order summary"),t(),e(51,"div",16)(52,"div",17)(53,"dl",18)(54,"dt",19),i(55,"Subtotal"),t(),e(56,"dd",20),i(57),l(58,"currency"),t()(),e(59,"dl",18)(60,"dt",19),i(61,"Discount"),t(),e(62,"dd",21),i(63),l(64,"currency"),t()(),e(65,"dl",18)(66,"dt",19),i(67,"Delivery fee"),t(),e(68,"dd",20),i(69),l(70,"currency"),t()()(),e(71,"dl",22)(72,"dt",19),i(73,"Total"),t(),e(74,"dd",20),i(75),l(76,"currency"),t()()()()()()}if(a&2){let r=C();d(4),p("Order summary for order #",r.order.id,""),d(2),p(" ",r.buttonText," "),d(9),m(s(16,11,r.order.shippingAddress)),d(6),m(s(22,13,r.order.paymentSummary)),d(9),m(r.order.buyerEmail),d(5),m(r.order.status),d(5),m(S(41,15,r.order.orderDate,"medium")),d(6),y(r.order.orderItems),d(11),p(" ",s(58,18,r.order.subtotal)," "),d(6),p(" -",s(64,20,r.order.discount)," "),d(6),p(" ",s(70,22,r.order.shippingPrice)," "),d(6),p(" ",s(76,24,r.order.total)," ")}}var K=(()=>{let n=class n{constructor(){this.orderService=x(E),this.activatedRoute=x(U),this.accountService=x(z),this.adminService=x(J),this.router=x(L),this.buttonText=this.accountService.isAdmin()?"Return to admin":"Return to orders"}ngOnInit(){this.loadOrder()}onReturnClick(){this.accountService.isAdmin()?this.router.navigateByUrl("/admin"):this.router.navigateByUrl("/orders")}loadOrder(){let c=this.activatedRoute.snapshot.paramMap.get("id");if(!c)return;(this.accountService.isAdmin()?this.adminService.getOrder(+c):this.orderService.getOrderDetailed(+c)).subscribe({next:u=>this.order=u})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=f({type:n,selectors:[["app-order-detailed"]],standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"bg-white","py-8","shadow-md","max-w-screen-lg","mx-auto"],[1,"px-4","w-full"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","align-middle","gap-4"],[1,"text-2xl","text-center","font-semibold"],["mat-stroked-button","",1,"w-full","sm:w-auto",3,"click"],[1,"mt-8","py-3","border-t","border-gray-200","flex","flex-col","sm:flex-row","gap-8"],[1,"space-y-2","flex-1"],[1,"text-lg","font-semibold"],[1,"font-medium"],[1,"mt-1","font-light"],[1,"mt-4"],[1,"border-y","border-gray-200"],[1,"w-full","text-center"],[1,"divide-y","divide-gray-200"],[1,"space-y-4","rounded-lg","border-y","border-gray-200","p-4","bg-white"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"space-y-2"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"py-4"],[1,"flex","items-center","gap-4"],[1,"w-10","h-10","object-cover","rounded-lg",3,"src","alt"],[1,"p-4"],[1,"p-4","text-right"]],template:function(o,u){o&1&&B(0,Z,77,26,"mat-card",0),o&2&&T(u.order?0:-1)},dependencies:[q,V,N,h,b,G,H]});let a=n;return a})();var ee=(a,n)=>n.id,te=(a,n,r)=>({"bg-green-100 text-green-800":a,"bg-yellow-100 text-yellow-800":n,"bg-red-100 text-red-800":r});function ie(a,n){if(a&1&&(e(0,"tr",10)(1,"td",11),i(2),t(),e(3,"td",12),i(4),l(5,"date"),t(),e(6,"td",12),i(7),l(8,"currency"),t(),e(9,"td",12)(10,"span",13),i(11),t()()()),a&2){let r=n.$implicit;P("routerLink","/orders/",r.id,""),d(2),p("# ",r.id,""),d(2),m(S(5,7,r.orderDate,"medium")),d(3),m(s(8,10,r.total)),d(3),k("ngClass",F(12,te,r.status==="Completed",r.status==="Pending",r.status==="Cancelled")),d(),p(" ",r.status," ")}}var Q=(()=>{let n=class n{constructor(){this.orderService=x(E),this.orders=[]}ngOnInit(){this.orderService.getOrdersForUser().subscribe({next:c=>this.orders=c})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=f({type:n,selectors:[["app-order"]],standalone:!0,features:[g],decls:19,vars:0,consts:[[1,"mx-auto","mt-32","px-4","sm:px-6","lg:px-8","max-w-7xl"],[1,"font-semibold","text-2xl","mb-6","text-center"],[1,"flex","flex-col"],[1,"w-full","overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","cursor-pointer"],[1,"bg-gray-50"],[1,"uppercase","text-gray-600","text-sm"],[1,"text-center","px-4","py-3","sm:px-6"],[1,"text-left","px-4","py-3","sm:px-6"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-100","transition-colors",3,"routerLink"],[1,"px-4","py-3","sm:px-6","text-center"],[1,"px-4","py-3","sm:px-6"],[1,"px-2","py-1","text-sm","rounded-full",3,"ngClass"]],template:function(o,u){o&1&&(e(0,"div",0)(1,"h2",1),i(2,"My Orders"),t(),e(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr",6)(8,"th",7),i(9,"Order"),t(),e(10,"th",8),i(11,"Date"),t(),e(12,"th",8),i(13,"Total"),t(),e(14,"th",8),i(15,"Status"),t()()(),e(16,"tbody",9),v(17,ie,12,16,"tr",10,ee),t()()()()()),o&2&&(d(17),y(u.orders))},dependencies:[$,h,b,j]});let a=n;return a})();var Oe=[{path:"",component:Q,canActivate:[I]},{path:":id",component:K,canActivate:[I]}];export{Oe as orderRoutes};
