import{a as q,b as H}from"./chunk-IAVXFE3G.js";import{a as I}from"./chunk-FQSVEZTO.js";import{b as B}from"./chunk-XDCM73YA.js";import{A as M,C as g,D as J,E as b,F as N,I as w,K as $,L as E,M as R,O as T,Q as v,S as D,T as z,W as G}from"./chunk-Q2SHQIPU.js";import{h as O,ia as F,j as _}from"./chunk-UVJ4NX35.js";import"./chunk-JGYM447R.js";import{Cb as x,Db as A,Fb as V,Gb as P,Hb as i,Ib as r,Jb as c,Qb as C,Qc as k,Sb as S,Vb as L,ac as l,bc as y,cb as n,cc as j,db as U,ic as f,ka as s,oa as d,vb as h,xb as u}from"./chunk-GDNDWUAB.js";var W=(()=>{let t=class t{constructor(){this.fb=s(T),this.accountService=s(B),this.router=s(_),this.activatedRoute=s(O),this.returnUrl="/shop",this.loginForm=this.fb.group({email:[""],password:[""]});let o=this.activatedRoute.snapshot.queryParams.returnUrl;o&&(this.returnUrl=o)}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=d({type:t,selectors:[["app-login"]],standalone:!0,features:[f],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(a,m){a&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return m.onSubmit()}),i(2,"div",2)(3,"h1",3),l(4,"Login"),r()(),i(5,"mat-form-field",4)(6,"mat-label"),l(7,"Email address"),r(),c(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),l(11,"Password"),r(),c(12,"input",6),r(),i(13,"button",7),l(14,"Sign in"),r()()()),a&2&&(n(),u("formGroup",m.loginForm))},dependencies:[v,w,M,b,N,E,R,I,G,q,D,F]});let e=t;return e})();function tt(e,t){if(e&1&&(i(0,"span"),l(1),r()),e&2){let p=S(2);n(),j("",p.label," is required")}}function et(e,t){e&1&&(i(0,"span"),l(1,"Invalid email format"),r())}function rt(e,t){if(e&1&&(i(0,"mat-error"),h(1,tt,2,1,"span")(2,et,2,0,"span"),r()),e&2){let p=t.ngIf;n(),x(p.required?1:-1),n(),x(p.email?2:-1)}}var X=(()=>{let t=class t{constructor(o){this.controlDir=o,this.label="",this.type="text",this.controlDir.valueAccessor=this}writeValue(o){}registerOnChange(o){}registerOnTouched(o){}get control(){return this.controlDir.control}};t.\u0275fac=function(a){return new(a||t)(U(J,2))},t.\u0275cmp=d({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[f],decls:5,vars:5,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"],[4,"ngIf"]],template:function(a,m){a&1&&(i(0,"mat-form-field",0)(1,"mat-label"),l(2),r(),c(3,"input",1),h(4,rt,3,2,"mat-error",2),r()),a&2&&(n(2),y(m.label),n(),L("type",m.type),L("placeholder",m.label),u("formControl",m.control),n(),u("ngIf",m.control.errors))},dependencies:[v,M,b,$,G,q,z,D,k]});let e=t;return e})();function it(e,t){if(e&1&&(i(0,"li"),l(1),r()),e&2){let p=t.$implicit;n(),y(p)}}function ot(e,t){if(e&1&&(i(0,"div",8)(1,"ul",10),V(2,it,2,1,"li",null,A),r()()),e&2){let p=S();n(2),P(p.validationErrors)}}var Y=(()=>{let t=class t{constructor(){this.fb=s(T),this.accountService=s(B),this.router=s(_),this.snack=s(H),this.registerForm=this.fb.group({firstName:["",g.required],lastName:["",g.required],email:["",[g.required,g.email]],password:["",g.required]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:o=>this.validationErrors=o})}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=d({type:t,selectors:[["app-register"]],standalone:!0,features:[f],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(a,m){a&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return m.onSubmit()}),i(2,"div",2)(3,"h1",3),l(4,"Register"),r()(),c(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),h(9,ot,4,0,"div",8),i(10,"button",9),l(11,"Register"),r()()()),a&2&&(n(),u("formGroup",m.registerForm),n(8),x(m.validationErrors?9:-1),n(),u("disabled",m.registerForm.invalid))},dependencies:[v,w,b,N,E,R,I,F,X]});let e=t;return e})();var Dt=[{path:"login",component:W},{path:"register",component:Y}];export{Dt as accountRoutes};
